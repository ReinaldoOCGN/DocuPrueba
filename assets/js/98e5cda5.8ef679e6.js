"use strict";(globalThis.webpackChunkdocuwebema=globalThis.webpackChunkdocuwebema||[]).push([[1905],{1173(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"doc-webema-prue/clases","title":"Clases","description":"En esta secci\xf3n se describe la carpeta Clases y las clases creadas junto con su funcionalidad.","source":"@site/docs/doc-webema-prue/clases.md","sourceDirName":"doc-webema-prue","slug":"/doc-webema-prue/clases","permalink":"/Documentacion/next/doc-webema-prue/clases","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/doc-webema-prue/clases.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Modelos","permalink":"/Documentacion/next/doc-webema-prue/modelos"},"next":{"title":"Controlador","permalink":"/Documentacion/next/doc-webema-prue/controlador"}}');var a=s(4848),o=s(8453);const t={sidebar_position:4},i="Clases",c={},d=[{value:"Conexi\xf3n",id:"conexi\xf3n",level:2},{value:"Consultas",id:"consultas",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"clases",children:"Clases"})}),"\n",(0,a.jsxs)(n.p,{children:["En esta secci\xf3n se describe la carpeta ",(0,a.jsx)(n.code,{children:"Clases"})," y las clases creadas junto con su funcionalidad."]}),"\n",(0,a.jsx)(n.h2,{id:"conexi\xf3n",children:"Conexi\xf3n"}),"\n",(0,a.jsxs)(n.p,{children:["En la clase ",(0,a.jsx)(n.code,{children:"Conexion"})," se implementa el m\xe9todo encargado de obtener la cadena de conexi\xf3n definida en ",(0,a.jsx)(n.code,{children:"appsettings.json"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",metastring:'tittle="Conexion.cs"',children:'using System.Data.SqlClient;\r\nnamespace MostrarEma.Clases\r\n{\r\n\r\n    public class Conexion\r\n    {\r\n        public string cadenaSQL = string.Empty;\r\n\r\n        public Conexion()\r\n        {\r\n            var builder = new ConfigurationBuilder().SetBasePath(Directory.GetCurrentDirectory())\r\n                        .AddJsonFile("appsettings.json").Build();\r\n\r\n            cadenaSQL = builder.GetSection("ConnectionStrings:CadenaSQL").Value;\r\n        }\r\n        public string getCadenaSQL()\r\n        {\r\n            return cadenaSQL;\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Esta clase permite centralizar la obtenci\xf3n de la cadena de conexi\xf3n, evitando repetir c\xf3digo cada vez que se necesite acceder a la base de datos."}),"\n",(0,a.jsx)(n.h2,{id:"consultas",children:"Consultas"}),"\n",(0,a.jsx)(n.admonition,{title:"Clase obsoleta",type:"caution",children:(0,a.jsx)(n.p,{children:"Evita usar esta clase. Est\xe1 en proceso de deprecaci\xf3n."})}),"\n",(0,a.jsxs)(n.p,{children:["La clase ",(0,a.jsx)(n.code,{children:"Consultas"})," es la encargada de ejecutar las consultas a la base de datos y mapear los resultados al modelo correspondiente."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",metastring:'title="Consultas.cs"',children:'using MostrarEma.Datos;\r\nusing System.Data;\r\nusing System.Data.SqlClient;\r\n\r\nusing MostrarEma.Models;\r\n\r\nnamespace MostrarEma.Clases;\r\n\r\npublic class Consultas\r\n{\r\n\r\n    public List<EmaUsuariosModel> Listar()\r\n    {\r\n        var oLista = new List<EmaUsuariosModel>();\r\n        var cn = new Conexion();\r\n\r\n        using (var conexion = new SqlConnection(cn.getCadenaSQL()))\r\n        {\r\n            conexion.Open();\r\n\r\n            SqlCommand cmd = new SqlCommand("SELECT  UsuTipIde,UsuIde,UsuClave,UsuTempClave,UsuTerminos,UsuAuten,UsuFecAut,UsuAsegurador,UsuRegimen,UsuPoblacion FROM EmaUsuario", conexion);\r\n            cmd.CommandType = CommandType.Text;\r\n\r\n            using (var dr = cmd.ExecuteReader())\r\n            {\r\n                while (dr.Read())\r\n                {\r\n                    oLista.Add(new EmaUsuariosModel()\r\n                    {\r\n                        UsuTipIde = dr["UsuTipIde"].ToString(),\r\n                        UsuIde = dr["UsuIde"].ToString(),\r\n                        UsuClave = dr["UsuClave"].ToString(),\r\n                        UsuTempClave = dr["UsuTempClave"].ToString(),\r\n                        UsuTerminos = dr["UsuTerminos"].ToString(),\r\n                        UsuAuten = dr["UsuAuten"].ToString(),\r\n                        UsuFecAut = dr["UsuFecAut"].ToString(),\r\n                        UsuAsegurador = dr["UsuAsegurador"].ToString(),\r\n                        UsuRegimen = dr["UsuRegimen"].ToString(),\r\n                        UsuPoblacion = dr["UsuPoblacion"].ToString()\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        return oLista;\r\n    }\r\n\r\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Esta clase ejecuta una consulta SQL directa sobre la tabla ",(0,a.jsx)(n.code,{children:"EmaUsuario"})," y devuelve una lista de objetos ",(0,a.jsx)(n.code,{children:"EmaUsuariosModel"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>i});var r=s(6540);const a={},o=r.createContext(a);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);